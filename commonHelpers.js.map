{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["'use strict';\nimport axios from 'axios';\n\nexport async function searchImage(query, page) {\n    const baseUrl = \"https://pixabay.com/api/\";\n    const params = {\n        key: \"44056187-241b6d2c7b447ed7c2385a3f0\",\n        q: query,\n        image_type: \"photo\",\n        orientation: \"horizontal\",\n        safesearch: true,\n        per_page: 15,\n        page: page\n    };\n\n    try {\n        const response = await axios.get(baseUrl, { params });\n        return response.data;\n        // return {\n        //     images: response.data.hits,\n        //     totalHits: response.data.totalHits,\n        // };\n    } catch (error) {\n        console.log(\"catch\", error);\n        return [];\n    }\n}\n\n// export function searchImage(query) {\n//     const baseUrl = \"https://pixabay.com/api/\";\n//     const params = new URLSearchParams({\n//         key: \"44056187-241b6d2c7b447ed7c2385a3f0\",\n//         q: query,\n//         image_type: \"photo\",\n//         orientation: \"horizontal\",\n//         safesearch: true,\n//     });\n//     const url = `${baseUrl}?${params}`;\n//     return fetch(url)\n//         .then(response => {\n//             if (!response.ok) {\n//                 throw new Error(response.statusText)\n//             }\n//             return response.json();\n//         })\n//         .then(data => data.hits)\n//         .catch(error => {\n//             console.log(\"catch\", error);\n//             return [];\n//         });\n// }","'use strict';\nexport const gallery = document.querySelector(\".gallery\");\n\nexport function renderImages(images) {\n    const imageMarkup = images.map(image => `<li class=\"gallery-item\">\n        <a href=\"${image.largeImageURL}\" class=\"image-card\">\n            <div class=\"container\">\n                <img\n                    src=\"${image.webformatURL}\" \n                    alt=\"${image.tags}\"\n                />\n            </div>\n            <div class=\"description\">\n                <p class=\"info\">\n                    <span class=\"label\">Likes:</span>\n                    <span class=\"value\">${image.likes}</span>\n                </p>\n                <p class=\"info\">\n                    <span class=\"label\">Views:</span>\n                    <span class=\"value\">${image.views}</span>\n                </p>\n                <p class=\"info\">\n                    <span class=\"label\">Comments:</span>\n                    <span class=\"value\">${image.comments}</span>\n                </p>\n                <p class=\"info\">\n                    <span class=\"label\">Downloads:</span>\n                    <span class=\"value\">${image.downloads}</span>\n                </p> \n            </div>\n        </a>\n    </li>`)\n        .join(\"\");\n    gallery.insertAdjacentHTML(\"beforeend\", imageMarkup);\n    // gallery.innerHTML = imageMarkup;\n}\n","'use strict';\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport { searchImage } from \"./js/pixabay-api.js\"\nimport { gallery, renderImages } from \"./js/render-functions.js\"\n\nconst form = document.querySelector(\".form\");\nform.addEventListener(\"submit\", handleSubmit);\n\nconst formInput = document.querySelector(\".form-input\");\nconst loader = document.querySelector(\".loader\");\n\nconst loadMoreBtn = document.querySelector(\".load-more-btn\");\nloadMoreBtn.addEventListener(\"click\", loadMore);\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',\n    captionDelay: 250,\n});\n\nlet page = 1;\nlet query = \"\";\nlet totalHits = 0;\n\nasync function handleSubmit(event) {\n    event.preventDefault();\n    query = formInput.value.trim(); //те, що ввидиться в інпут користувачем...інакше event.target.elements.query.value.trim()\n    page = 1;\n    if (!query) {\n        iziToast.show({\n            message: 'Please enter data',\n            backgroundColor: '#ffa000',\n            messageSize: '16px',\n            messageColor: '#fafafb',\n            messageLineHeight: '150%',\n            position: 'topRight',\n        });\n        return;\n    }\n    gallery.innerHTML = \"\";\n    try {\n        showLoader();\n        const data = await searchImage(query, page);\n        totalHits = data.totalHits;\n        if (totalHits === 0) {\n            iziToast.show({\n                message: 'Sorry, there are no images matching your search query. Please try again!',\n                backgroundColor: '#ef4040',\n                messageSize: '16px',\n                messageColor: '#fafafb',\n                messageLineHeight: '150%',\n                position: 'topRight',\n            });\n        } else {\n            renderImages(data.hits);\n            lightbox.refresh();\n            if (totalHits <= 15 ) {\n                iziToast.show({\n                message: \"We're sorry, but you've reached the end of search results.\",\n                backgroundColor: '#ef4040',\n                messageSize: '16px',\n                messageColor: '#fafafb',\n                messageLineHeight: '150%',\n                position: 'topRight',\n                });\n            } else {\n                loadMoreBtn.classList.replace(\"load-more-hidden\", \"load-more\");\n            }\n        }\n    } catch (error) {\n        console.log(\"catch\", error);\n    } finally {\n        hideLoader();\n        form.reset();\n    }\n}\n\nasync function loadMore() {\n    page += 1;\n    showLoader();\n    // loadMoreBtn.disabled = true;\n    try {\n        const data = await searchImage(query, page);\n        renderImages(data.hits);\n        totalHits = data.totalHits;\n        lightbox.refresh();\n        scrollToGallery();\n        if (totalHits <= page * 15) {\n            iziToast.show({\n                message: \"We're sorry, but you've reached the end of search results.\",\n                backgroundColor: '#ef4040',\n                messageSize: '16px',\n                messageColor: '#fafafb',\n                messageLineHeight: '150%',\n                position: 'topRight',\n            });\n            loadMoreBtn.classList.replace(\"load-more\", \"load-more-hidden\");\n        } else {\n            loadMoreBtn.classList.replace(\"load-more-hidden\", \"load-more\");\n        }\n    } catch (error) {\n        alert(error.message);\n    }\n    finally {\n        hideLoader();\n        // loadMoreBtn.disabled = false;\n    }\n}\n\nfunction showLoader() {\n    loader.style.display = 'block';\n    loadMoreBtn.classList.replace(\"load-more\", \"load-more-hidden\");\n\n}\n\nfunction hideLoader() {\n    loader.style.display = 'none';\n}\n\nfunction scrollToGallery() {\n    const galleryItemHeight = document.querySelector(\".gallery-item\").getBoundingClientRect().height;\n    window.scrollBy({\n        top: galleryItemHeight * 2,\n        behavior: \"smooth\",\n    });\n}\n\n\n\n\n\n"],"names":["searchImage","query","page","baseUrl","params","axios","error","gallery","renderImages","images","imageMarkup","image","form","handleSubmit","formInput","loader","loadMoreBtn","loadMore","lightbox","SimpleLightbox","totalHits","event","iziToast","showLoader","data","hideLoader","scrollToGallery","galleryItemHeight"],"mappings":"owBAGO,eAAeA,EAAYC,EAAOC,EAAM,CAC3C,MAAMC,EAAU,2BACVC,EAAS,CACX,IAAK,qCACL,EAAGH,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAU,GACV,KAAMC,CACd,EAEI,GAAI,CAEA,OADiB,MAAMG,EAAM,IAAIF,EAAS,CAAE,OAAAC,CAAM,CAAE,GACpC,IAKnB,OAAQE,EAAO,CACZ,eAAQ,IAAI,QAASA,CAAK,EACnB,EACV,CACL,CCzBO,MAAMC,EAAU,SAAS,cAAc,UAAU,EAEjD,SAASC,EAAaC,EAAQ,CACjC,MAAMC,EAAcD,EAAO,IAAIE,GAAS;AAAA,mBACzBA,EAAM,aAAa;AAAA;AAAA;AAAA,2BAGXA,EAAM,YAAY;AAAA,2BAClBA,EAAM,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0CAMKA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,0CAIXA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,0CAIXA,EAAM,QAAQ;AAAA;AAAA;AAAA;AAAA,0CAIdA,EAAM,SAAS;AAAA;AAAA;AAAA;AAAA,UAI/C,EACD,KAAK,EAAE,EACZJ,EAAQ,mBAAmB,YAAaG,CAAW,CAEvD,CC1BA,MAAME,EAAO,SAAS,cAAc,OAAO,EAC3CA,EAAK,iBAAiB,SAAUC,CAAY,EAE5C,MAAMC,EAAY,SAAS,cAAc,aAAa,EAChDC,EAAS,SAAS,cAAc,SAAS,EAEzCC,EAAc,SAAS,cAAc,gBAAgB,EAC3DA,EAAY,iBAAiB,QAASC,CAAQ,EAE9C,MAAMC,EAAW,IAAIC,EAAe,aAAc,CAC9C,aAAc,MACd,aAAc,GAClB,CAAC,EAED,IAAIjB,EAAO,EACPD,EAAQ,GACRmB,EAAY,EAEhB,eAAeP,EAAaQ,EAAO,CAI/B,GAHAA,EAAM,eAAc,EACpBpB,EAAQa,EAAU,MAAM,OACxBZ,EAAO,EACH,CAACD,EAAO,CACRqB,EAAS,KAAK,CACV,QAAS,oBACT,gBAAiB,UACjB,YAAa,OACb,aAAc,UACd,kBAAmB,OACnB,SAAU,UACtB,CAAS,EACD,MACH,CACDf,EAAQ,UAAY,GACpB,GAAI,CACAgB,IACA,MAAMC,EAAO,MAAMxB,EAAYC,EAAOC,CAAI,EAC1CkB,EAAYI,EAAK,UACbJ,IAAc,EACdE,EAAS,KAAK,CACV,QAAS,2EACT,gBAAiB,UACjB,YAAa,OACb,aAAc,UACd,kBAAmB,OACnB,SAAU,UAC1B,CAAa,GAEDd,EAAagB,EAAK,IAAI,EACtBN,EAAS,QAAO,EACZE,GAAa,GACbE,EAAS,KAAK,CACd,QAAS,6DACT,gBAAiB,UACjB,YAAa,OACb,aAAc,UACd,kBAAmB,OACnB,SAAU,UAC1B,CAAiB,EAEDN,EAAY,UAAU,QAAQ,mBAAoB,WAAW,EAGxE,OAAQV,EAAO,CACZ,QAAQ,IAAI,QAASA,CAAK,CAClC,QAAc,CACNmB,IACAb,EAAK,MAAK,CACb,CACL,CAEA,eAAeK,GAAW,CACtBf,GAAQ,EACRqB,IAEA,GAAI,CACA,MAAMC,EAAO,MAAMxB,EAAYC,EAAOC,CAAI,EAC1CM,EAAagB,EAAK,IAAI,EACtBJ,EAAYI,EAAK,UACjBN,EAAS,QAAO,EAChBQ,IACIN,GAAalB,EAAO,IACpBoB,EAAS,KAAK,CACV,QAAS,6DACT,gBAAiB,UACjB,YAAa,OACb,aAAc,UACd,kBAAmB,OACnB,SAAU,UAC1B,CAAa,EACDN,EAAY,UAAU,QAAQ,YAAa,kBAAkB,GAE7DA,EAAY,UAAU,QAAQ,mBAAoB,WAAW,CAEpE,OAAQV,EAAO,CACZ,MAAMA,EAAM,OAAO,CACtB,QACO,CACJmB,GAEH,CACL,CAEA,SAASF,GAAa,CAClBR,EAAO,MAAM,QAAU,QACvBC,EAAY,UAAU,QAAQ,YAAa,kBAAkB,CAEjE,CAEA,SAASS,GAAa,CAClBV,EAAO,MAAM,QAAU,MAC3B,CAEA,SAASW,GAAkB,CACvB,MAAMC,EAAoB,SAAS,cAAc,eAAe,EAAE,sBAAuB,EAAC,OAC1F,OAAO,SAAS,CACZ,IAAKA,EAAoB,EACzB,SAAU,QAClB,CAAK,CACL"}